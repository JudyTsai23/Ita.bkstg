{"version":3,"sources":["webpack:///./src/views/Management/News/News.vue?0de5","webpack:///./src/const/apiUrl.js","webpack:///./src/views/Management/News/News.vue?df02","webpack:///./src/views/Management/News/News.js","webpack:///./src/views/Management/News/News.js?564e","webpack:///./src/views/Management/News/News.vue","webpack:///./src/components/ProcessButtons.vue?bac4","webpack:///src/components/ProcessButtons.vue","webpack:///./src/components/ProcessButtons.vue?727d","webpack:///./src/components/ProcessButtons.vue"],"names":["api","meal","getAll","getOne","save","saveSort","delete","mealCate","getAllSub","deleteSub","news","apiUrl","getUrl","group","action","value","undefined","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","newsList","fields","noResults","noItems","label","placeholder","scopedSlots","_u","key","fn","ref","item","_e","id","on","init","staticRenderFns","_style","sorter","filter","name","components","ProcessButtons","data","mounted","methods","getNewsList","$store","commit","url","ApiUrl","AjaxService","get","successResp","restData","resultList","map","publish_date","publishDate","toString","Y","substr","M","D","console","log","errorResp","getBadge","type","checkChanged","changed","confirm","component","$event","edit","del","props","isChange","default","itemId","required","itemGroup","editUrl","delUrl","delMsg","url_base","computed","delAlertStr"],"mappings":"kHAAA,W,oCCCA,IAAMA,EAAM,CACVC,KAAM,CACJC,OAAQ,sBACRC,OAAQ,qBACRC,KAAM,oBACNC,SAAU,eACVC,OAAQ,iBAEVC,SAAU,CACRL,OAAQ,wBACRM,UAAW,uBACXL,OAAQ,oBACRC,KAAM,wBACNC,SAAU,mBACVC,OAAQ,oBACRG,UAAW,yBAEbC,KAAM,CACJR,OAAQ,eACRC,OAAQ,oBACRC,KAAM,oBACNE,OAAQ,kBAGNK,EAAS,CAEbC,OAFa,SAENC,EAAOC,GACZ,GAAID,GAASC,EAAQ,CACnB,IAAIC,EAAQf,EAAIa,GAAOC,GACvB,YAAiBE,IAAVD,EAAsBA,EAAQ,KAEvC,OAAO,OAIIJ,U,2CCpCf,IAAIM,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,cAAc,CAACE,YAAY,uBAAuB,CAACF,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,kBAAkBP,EAAIQ,GAAG,WAAW,GAAGJ,EAAG,YAAY,CAACA,EAAG,aAAa,CAACG,MAAM,CAAC,MAAQP,EAAIS,SAAS,OAAST,EAAIU,OAAO,eAAe,GAAG,wBAAwB,GAAG,iBAAiB,GAAG,YAAc,CAAEC,UAAW,SAAUC,QAAS,UAAW,YAAc,CAAEC,MAAO,MAAOC,YAAa,YAAa,mBAAqB,CAAED,MAAO,WAAY,QAAU,GAAG,MAAQ,GAAG,OAAS,GAAG,WAAa,IAAIE,YAAYf,EAAIgB,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,SAASC,GACtoB,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAAChB,EAAG,KAAK,CAAEgB,EAAW,OAAEhB,EAAG,SAAS,CAACE,YAAY,cAAcC,MAAM,CAAC,MAAQ,YAAY,CAACP,EAAIQ,GAAG,QAAQJ,EAAG,SAAS,CAACE,YAAY,cAAcC,MAAM,CAAC,MAAQ,UAAU,CAACP,EAAIQ,GAAG,SAAS,MAAM,CAACS,IAAI,MAAMC,GAAG,SAASC,GAC/N,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAAChB,EAAG,KAAK,CAAEgB,EAAQ,IAAEhB,EAAG,SAAS,CAACE,YAAY,cAAcC,MAAM,CAAC,MAAQ,WAAW,CAACP,EAAIQ,GAAG,QAAQR,EAAIqB,MAAM,MAAM,CAACJ,IAAI,UAAUC,GAAG,SAASC,GACxJ,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAAChB,EAAG,KAAK,CAACE,YAAY,QAAQ,CAACF,EAAG,iBAAiB,CAACG,MAAM,CAAC,UAAUa,EAAKE,GAAG,aAAa,OAAO,WAAW,oBAAoBC,GAAG,CAAC,SAAWvB,EAAIwB,SAAS,WAAW,GAAGpB,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,UAAU,CAACH,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,OAAO,GAAK,sBAAsB,CAACP,EAAIQ,GAAG,WAAW,IAAI,IAC/SiB,EAAkB,G,oCCHhBf,EAAS,CACb,CAAEO,IAAK,QAASJ,MAAO,QACvB,CAAEI,IAAK,cAAeJ,MAAO,QAC7B,CAAEI,IAAK,OAAQJ,MAAO,MACtB,CAAEI,IAAK,SAAUJ,MAAO,OAAQa,OAAQ,aACxC,CAAET,IAAK,MAAOJ,MAAO,OAAQa,OAAQ,aAErC,CACET,IAAK,UACLJ,MAAO,KACPa,OAAQ,YACRC,QAAQ,EACRC,QAAQ,IAIG,GACbC,KAAM,OACNC,WAAY,CACVC,uBAEFC,KALa,WAMX,MAAO,CAELvB,SAAU,GAEVC,WAGJuB,QAba,WAcXhC,KAAKuB,QAEPU,QAAS,CACPV,KADO,WAELvB,KAAKkC,eAGPA,YALO,WAKO,WACZlC,KAAKmC,OAAOC,OAAO,MAAO,CAAC,iBAAiB,IAC5C,IAAIC,EAAMC,OAAO7C,OAAO,OAAQ,UAChC8C,OAAYC,IACVH,GACA,SAACI,GACC,GAAIA,EAAYC,SAAU,CACxB,IAAIC,EAAaF,EAAYC,SAE7B,EAAKlC,SAAWmC,EAAWC,KAAI,SAACzB,GAC9B,IAAI0B,EAAe1B,EAAK2B,YAAYC,WAChCC,EAAIH,EAAaI,OAAO,EAAG,GAC7BC,EAAIL,EAAaI,OAAO,EAAG,GAC3BE,EAAIN,EAAaI,OAAO,EAAG,GAG7B,OAFA9B,EAAK2B,YAAL,UAAsBE,EAAtB,YAA2BE,EAA3B,YAAgCC,GAEzBhC,KAET,EAAKgB,OAAOC,OAAO,MAAO,CAAC,iBAAiB,IAC5CgB,QAAQC,IAAI,eAGhB,SAACC,GACCF,QAAQC,IAAI,WACZD,QAAQC,IAAIC,OAKlBC,SAlCO,SAkCEC,GACP,OAAQA,GACN,IAAK,KACH,MAAO,OACT,IAAK,KACH,MAAO,UACT,WAKJC,aA7CO,WA8CL,OAAIzD,KAAK0D,WACHC,QAAQ,2CCnFsN,I,wBCQtOC,EAAY,eACd,EACA9D,EACA0B,GACA,EACA,KACA,WACA,MAIa,aAAAoC,E,2CCnBf,IAAI9D,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,iBAAiB,CAACG,MAAM,CAAC,QAAU,KAAK,CAACH,EAAG,aAAa,CAACE,YAAY,uBAAuBC,MAAM,CAAC,MAAQ,UAAU,KAAO,KAAK,KAAO,cAAcgB,GAAG,CAAC,QAAU,SAASuC,GAAQ,OAAO9D,EAAI+D,UAAU,CAAC/D,EAAIQ,GAAG,QAAQJ,EAAG,aAAa,CAACE,YAAY,uBAAuBC,MAAM,CAAC,MAAQ,SAAS,KAAO,KAAK,KAAO,aAAagB,GAAG,CAAC,QAAU,SAASuC,GAAQ,OAAO9D,EAAIgE,SAAS,CAAChE,EAAIQ,GAAG,SAAS,IAC1eiB,EAAkB,G,wBCUP,GACfI,sBACAoC,OAEAC,UACAT,aACAU,YAGAC,QACAC,aAGAC,WACAb,YACAY,aAGAE,SACAd,YACAU,YAGAK,QACAf,YACAU,YAGAM,QACAhB,YACAU,aAGAnC,KAjCA,WAkCA,UAEAE,SACAwB,aADA,WAEA,wBACA,iDASAK,KAZA,WAaA,wBACA,yEACA,mCAGAC,IAlBA,WAkBA,WACA,8BACA,qBACA,+CACA,yEACAxB,cACAkC,eACA,YACA,4CACArB,qBACA,uBAEA,YACAA,qBACAA,qBAOAsB,UACAC,YADA,WAEA,0DCxFwV,I,YCOpVf,EAAY,eACd,EACA9D,EACA0B,GACA,EACA,KACA,WACA,MAIa,OAAAoC,E","file":"js/chunk-10cb71f0.eda9e3c1.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./News.vue?vue&type=style&index=0&id=04389a25&lang=scss&scoped=true&\"","// 訊息種類\r\nconst api = {\r\n  meal: {\r\n    getAll: \"/server/menu/meals/\", //+餐點類別ID\r\n    getOne: \"/server/menu/meal/\", //+ID\r\n    save: \"/server/menu/save\",\r\n    saveSort: \"/server/menu\",\r\n    delete: \"/server/menu/\", //+ID\r\n  },\r\n  mealCate: {\r\n    getAll: \"/server/mealCate/cate\",\r\n    getAllSub: \"/server/mealCate/sub\",\r\n    getOne: \"/server/mealCate/\", //+ID\r\n    save: \"/server/mealCate/save\",\r\n    saveSort: \"/server/mealCate\",\r\n    delete: \"/server/mealCate/\", //+ID\r\n    deleteSub: \"/server/mealCate/sub/\", //+餐點子類別ID\r\n  },\r\n  news: {\r\n    getAll: \"/server/news\",\r\n    getOne: \"/server/news/mng/\", //+ID\r\n    save: \"/server/news/save\",\r\n    delete: \"/server/news/\", //+ID\r\n  },\r\n};\r\nconst apiUrl = {\r\n  // 取得對應的種類名稱\r\n  getUrl(group, action) {\r\n    if (group || action) {\r\n      let value = api[group][action];\r\n      return value !== undefined ? value : null;\r\n    }\r\n    return null;\r\n  },\r\n};\r\n\r\nexport default apiUrl;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CCard',[_c('CCardHeader',{staticClass:\"h5 font-weight-bold\"},[_c('CIcon',{staticClass:\"mt-0\",attrs:{\"name\":\"cil-bullhorn\"}}),_vm._v(\" 訊息管理 \")],1),_c('CCardBody',[_c('CDataTable',{attrs:{\"items\":_vm.newsList,\"fields\":_vm.fields,\"table-filter\":\"\",\"items-per-page-select\":\"\",\"items-per-page\":10,\"noItemsView\":{ noResults: '無符合的項目', noItems: '尚無任何訊息' },\"tableFilter\":{ label: '尋找：', placeholder: '輸入關鍵字...' },\"itemsPerPageSelect\":{ label: '每頁顯示筆數：' },\"striped\":\"\",\"hover\":\"\",\"sorter\":\"\",\"pagination\":\"\"},scopedSlots:_vm._u([{key:\"public\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[(item.public)?_c('CBadge',{staticClass:\"label-badge\",attrs:{\"color\":\"success\"}},[_vm._v(\"公開\")]):_c('CBadge',{staticClass:\"label-badge\",attrs:{\"color\":\"light\"}},[_vm._v(\"隱藏\")])],1)]}},{key:\"top\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[(item.top)?_c('CBadge',{staticClass:\"label-badge\",attrs:{\"color\":\"danger\"}},[_vm._v(\"置頂\")]):_vm._e()],1)]}},{key:\"actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',{staticClass:\"py-2\"},[_c('ProcessButtons',{attrs:{\"item-id\":item.id,\"item-group\":\"news\",\"edit-url\":\"/mngt/news/edit/\"},on:{\"reloadFn\":_vm.init}})],1)]}}])})],1),_c('CCardFooter',{attrs:{\"align\":\"right\"}},[_c('CButton',{attrs:{\"color\":\"info\",\"to\":\"/mngt/news/create\"}},[_vm._v(\"新增訊息\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import ApiUrl from \"@/const/apiUrl.js\";\r\nimport AjaxService from \"@/services/ajaxService.js\";\r\nimport ProcessButtons from \"@/components/ProcessButtons\";\r\n\r\nconst fields = [\r\n  { key: \"title\", label: \"訊息標題\" },\r\n  { key: \"publishDate\", label: \"發布日期\" },\r\n  { key: \"type\", label: \"類別\" },\r\n  { key: \"public\", label: \"是否公開\", _style: \"width:10%\" },\r\n  { key: \"top\", label: \"是否置頂\", _style: \"width:10%\" },\r\n  // { key: \"status\", _style: \"min-width:100px;\" },\r\n  {\r\n    key: \"actions\",\r\n    label: \"操作\",\r\n    _style: \"width:15%\",\r\n    sorter: false,\r\n    filter: false,\r\n  },\r\n];\r\n\r\nexport default {\r\n  name: \"News\",\r\n  components: {\r\n    ProcessButtons,\r\n  },\r\n  data() {\r\n    return {\r\n      // 所有訊息\r\n      newsList: [],\r\n      // 表格標題列\r\n      fields,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getNewsList();\r\n    },\r\n    // 取得所有訊息\r\n    getNewsList() {\r\n      this.$store.commit(\"set\", [\"globalLoading\", true]);\r\n      let url = ApiUrl.getUrl(\"news\", \"getAll\");\r\n      AjaxService.get(\r\n        url,\r\n        (successResp) => {\r\n          if (successResp.restData) {\r\n            let resultList = successResp.restData;\r\n            // 處理發布日期的日期值\r\n            this.newsList = resultList.map((item) => {\r\n              let publish_date = item.publishDate.toString();\r\n              let Y = publish_date.substr(0, 4),\r\n                M = publish_date.substr(4, 2),\r\n                D = publish_date.substr(6, 2);\r\n              item.publishDate = `${Y}-${M}-${D}`;\r\n\r\n              return item;\r\n            });\r\n            this.$store.commit(\"set\", [\"globalLoading\", false]);\r\n            console.log(\"查詢訊息成功!\");\r\n          }\r\n        },\r\n        (errorResp) => {\r\n          console.log(\"查詢訊息失敗!\");\r\n          console.log(errorResp);\r\n        }\r\n      );\r\n    },\r\n    //\r\n    getBadge(type) {\r\n      switch (type) {\r\n        case \"活動\":\r\n          return \"info\";\r\n        case \"公告\":\r\n          return \"primary\";\r\n        default:\r\n          \"light\";\r\n      }\r\n    },\r\n    // 檢查頁面內容是否曾修改過\r\n    checkChanged() {\r\n      if (this.changed) {\r\n        if (confirm(\"頁面內容曾修改過，尚未儲存修改的變更將會捨棄！\\n是否確定要離開此頁面？\")) {\r\n          // 確定離開\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      // 未曾修改=>確定離開\r\n      return true;\r\n    },\r\n  },\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./News.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./News.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./News.vue?vue&type=template&id=04389a25&scoped=true&\"\nimport script from \"./News.js?vue&type=script&lang=js&\"\nexport * from \"./News.js?vue&type=script&lang=js&\"\nimport style0 from \"./News.vue?vue&type=style&index=0&id=04389a25&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04389a25\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CButtonToolbar',{attrs:{\"justify\":\"\"}},[_c('IconButton',{staticClass:\"text-white my-1 mr-2\",attrs:{\"color\":\"warning\",\"size\":\"sm\",\"icon\":\"cil-pencil\"},on:{\"clickFn\":function($event){return _vm.edit()}}},[_vm._v(\"編輯\")]),_c('IconButton',{staticClass:\"text-white my-1 mr-2\",attrs:{\"color\":\"danger\",\"size\":\"sm\",\"icon\":\"cil-trash\"},on:{\"clickFn\":function($event){return _vm.del()}}},[_vm._v(\"刪除\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <CButtonToolbar justify>\r\n    <IconButton color=\"warning\" size=\"sm\" icon=\"cil-pencil\" @clickFn=\"edit()\" class=\"text-white my-1 mr-2\">編輯</IconButton>\r\n    <IconButton color=\"danger\" size=\"sm\" icon=\"cil-trash\" @clickFn=\"del()\" class=\"text-white my-1 mr-2\">刪除</IconButton>\r\n  </CButtonToolbar>\r\n</template>\r\n\r\n<script>\r\nimport ApiUrl from \"@/const/apiUrl.js\";\r\nimport AjaxService from \"@/services/ajaxService.js\";\r\n\r\nexport default {\r\n  name: \"ProcessButtons\",\r\n  props: {\r\n    // 是否曾經改動過\r\n    isChange: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    // 處理中項目的ID\r\n    itemId: {\r\n      required: true,\r\n    },\r\n    // 處理中項目所屬的群組\r\n    itemGroup: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    // 編輯頁面的url\r\n    editUrl: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    // 刪除的url\r\n    delUrl: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    // 刪除的提醒說明\r\n    delMsg: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  methods: {\r\n    checkChanged() {\r\n      if (this.isChange) {\r\n        if (confirm(\"頁面內容曾修改過，尚未儲存修改的變更將會捨棄！\\n是否確定要離開此頁面？\")) {\r\n          // 確定離開\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      // 未曾修改=>確定離開\r\n      return true;\r\n    },\r\n    edit() {\r\n      if (this.checkChanged()) {\r\n        let url_base = this.editUrl == \"\" ? ApiUrl.getUrl(this.itemGroup, \"edit\") : this.editUrl;\r\n        this.$router.push(url_base + this.itemId);\r\n      }\r\n    },\r\n    del() {\r\n      if (confirm(this.delAlertStr)) {\r\n        if (this.checkChanged()) {\r\n          this.$store.commit(\"set\", [\"globalLoading\", true]);\r\n          let url_base = this.delUrl == \"\" ? ApiUrl.getUrl(this.itemGroup, \"delete\") : this.delUrl;\r\n          AjaxService.delete(\r\n            url_base + this.itemId,\r\n            (successResp) => {\r\n              this.$store.commit(\"set\", [\"globalLoading\", false]);\r\n              console.log(\"刪除成功!\");\r\n              this.$emit(\"reloadFn\");\r\n            },\r\n            (errorResp) => {\r\n              console.log(\"刪除失敗!\");\r\n              console.log(errorResp);\r\n            }\r\n          );\r\n        }\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    delAlertStr() {\r\n      return this.delMsg + \"是否確定要刪除？\\n***** 請注意！刪除後無法復原！*****\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProcessButtons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProcessButtons.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProcessButtons.vue?vue&type=template&id=9e645470&scoped=true&\"\nimport script from \"./ProcessButtons.vue?vue&type=script&lang=js&\"\nexport * from \"./ProcessButtons.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9e645470\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}