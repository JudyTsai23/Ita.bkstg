{"version":3,"sources":["webpack:///./src/const/apiUrl.js","webpack:///./src/components/ImageInput.vue?f8e4","webpack:///./node_modules/@coreui/utils/src/make-uid.js","webpack:///src/components/ImageInput.vue","webpack:///./src/components/ImageInput.vue?2fbe","webpack:///./src/components/ImageInput.vue","webpack:///./src/components/ImageInput.vue?9843","webpack:///./src/views/Management/News/NewsEdit.vue?95e1","webpack:///./src/const/newsType.js","webpack:///./src/views/Management/News/NewsEdit.js","webpack:///./src/views/Management/News/NewsEdit.js?5fd8","webpack:///./src/views/Management/News/NewsEdit.vue","webpack:///./src/views/Management/News/NewsEdit.vue?a5c9"],"names":["api","meal","getAll","getOne","save","saveSort","delete","mealCate","getAllSub","deleteSub","news","apiUrl","getUrl","group","action","value","undefined","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","UploadImageSelectedStr","horizontal","isRequired","safeId","on","GetUploadImage","scopedSlots","_u","key","fn","class","LabelGridClass","_v","_s","label","_e","proxy","directives","name","rawName","expression","ImagePreviewTitle","style","maxPreview","ImagePreviewSrc","removeUploadImage","staticRenderFns","makeUid","Math","random","toString","substr","props","type","default","wasValidated","oldImage","limitSize","limitUnit","watch","val","UploadImage","data","UploadImageName","computed","methods","files","event","reader","Validfile","file","size","unit","alert","console","document","component","$route","newsTypeList","model","newsData","callback","$$v","$set","description","length","content","image","$event","public","top","del","newsType","getOptions","map","item","getTypeNameByValue","Number","find","getTypeValueByName","components","ImageInput","currId","params","id","title","publish_date","NewsType","mounted","init","getNewsData","addRequiredMark","$store","commit","url","ApiUrl","AjaxService","get","successResp","restData","resultData","publishDate","Y","M","D","log","errorResp","requiredInputs","querySelectorAll","forEach","element","parentElement","previousElementSibling","innerHTML","form","querySelector","classList","add","checkValidity","replace","sendData","post","$router","push","focus","confirm","url_base"],"mappings":"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","file":"js/chunk-5691c5c6.aa9e9bb9.js","sourcesContent":["// 訊息種類\r\nconst api = {\r\n  meal: {\r\n    getAll: \"/server/menu/meals/\", //+餐點類別ID\r\n    getOne: \"/server/menu/meal/\", //+ID\r\n    save: \"/server/menu/save\",\r\n    saveSort: \"/server/menu\",\r\n    delete: \"/server/menu/\", //+ID\r\n  },\r\n  mealCate: {\r\n    getAll: \"/server/mealCate/cate\",\r\n    getAllSub: \"/server/mealCate/sub\",\r\n    getOne: \"/server/mealCate/\", //+ID\r\n    save: \"/server/mealCate/save\",\r\n    saveSort: \"/server/mealCate\",\r\n    delete: \"/server/mealCate/\", //+ID\r\n    deleteSub: \"/server/mealCate/sub/\", //+餐點子類別ID\r\n  },\r\n  news: {\r\n    getAll: \"/server/news\",\r\n    getOne: \"/server/news/mng/\", //+ID\r\n    save: \"/server/news/save\",\r\n    delete: \"/server/news/\", //+ID\r\n  },\r\n};\r\nconst apiUrl = {\r\n  // 取得對應的種類名稱\r\n  getUrl(group, action) {\r\n    if (group || action) {\r\n      let value = api[group][action];\r\n      return value !== undefined ? value : null;\r\n    }\r\n    return null;\r\n  },\r\n};\r\n\r\nexport default apiUrl;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CInputFile',{staticClass:\"form-group\",attrs:{\"placeholder\":_vm.UploadImageSelectedStr,\"custom\":\"\",\"horizontal\":_vm.horizontal,\"required\":_vm.isRequired,\"accept\":\"image/*\",\"id\":_vm.safeId},on:{\"change\":_vm.GetUploadImage},scopedSlots:_vm._u([(_vm.horizontal)?{key:\"label\",fn:function(){return [_c('span',{class:_vm.LabelGridClass},[_vm._v(\" \"+_vm._s(_vm.label)+\" \"),(_vm.isRequired)?_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*\")]):_vm._e()])]},proxy:true}:null,{key:\"description\",fn:function(){return [_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ImagePreviewSrc),expression:\"ImagePreviewSrc\"}],staticClass:\"mt-2\"},[_c('small',{staticClass:\"d-block\"},[_vm._v(_vm._s(_vm.ImagePreviewTitle))]),_c('label',{staticClass:\"position-relative img-thumbnail bg-white\",attrs:{\"for\":_vm.safeId}},[_c('img',{style:((\"max-width:\" + _vm.maxPreview)),attrs:{\"src\":_vm.ImagePreviewSrc,\"alt\":\"\"}}),_c('CButton',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.UploadImage),expression:\"UploadImage\"}],staticClass:\"align-top p-1\",attrs:{\"color\":\"danger\",\"shape\":\"pill\"},on:{\"click\":_vm.removeUploadImage}},[_c('CIcon',{staticClass:\"m-0\",attrs:{\"name\":\"cil-x\",\"size\":\"sm\"}})],1)],1)])]},proxy:true}],null,true)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//function for UI releted ID assignment, due to one in 10^15 probability of duplication\r\nconst makeUid = () => {\r\n  const key = Math.random().toString(36).substr(2)\r\n  return 'uid-' + key\r\n}\r\n\r\nexport default makeUid","<template>\r\n  <CInputFile :placeholder=\"UploadImageSelectedStr\" custom :horizontal=\"horizontal\" :required=\"isRequired\" accept=\"image/*\" @change=\"GetUploadImage\" :id=\"safeId\" class=\"form-group\">\r\n    <!-- Label -->\r\n    <template v-if=\"horizontal\" #label>\r\n      <span :class=\"LabelGridClass\">\r\n        {{ label }}\r\n        <span v-if=\"isRequired\" class=\"text-danger\">*</span>\r\n      </span>\r\n    </template>\r\n    <!-- 圖片預覽 -->\r\n    <template #description>\r\n      <div v-show=\"ImagePreviewSrc\" class=\"mt-2\">\r\n        <!-- --小標題-- -->\r\n        <small class=\"d-block\">{{ ImagePreviewTitle }}</small>\r\n        <!-- --圖片-- -->\r\n        <label :for=\"safeId\" class=\"position-relative img-thumbnail bg-white\">\r\n          <img :src=\"ImagePreviewSrc\" alt=\"\" :style=\"`max-width:${maxPreview}`\" />\r\n          <!-- --刪除上傳圖片的按鈕-- -->\r\n          <CButton v-show=\"UploadImage\" color=\"danger\" shape=\"pill\" @click=\"removeUploadImage\" class=\"align-top p-1\">\r\n            <CIcon name=\"cil-x\" size=\"sm\" class=\"m-0\" />\r\n          </CButton>\r\n        </label>\r\n      </div>\r\n    </template>\r\n  </CInputFile>\r\n</template>\r\n\r\n<script>\r\nimport { makeUid } from \"@coreui/utils/src\";\r\n\r\nexport default {\r\n  name: \"ImageInput\",\r\n  props: {\r\n    value: {\r\n      type: String,\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    wasValidated: Boolean,\r\n    // 橫向排版(CInput的)\r\n    horizontal: {\r\n      type: [Boolean, Object],\r\n      default: false,\r\n    },\r\n    // 原有圖片\r\n    oldImage: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    // 上傳的檔案大小限制\r\n    limitSize: {\r\n      type: Number,\r\n    },\r\n    // 上傳的檔案大小限制之單位\r\n    limitUnit: {\r\n      type: String,\r\n      default: \"KB\",\r\n    },\r\n    // 預覽圖的最大寬度\r\n    maxPreview: {\r\n      type: String,\r\n      default: \"100%\",\r\n    },\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.UploadImage = val;\r\n    },\r\n    UploadImage(val) {\r\n      this.$emit(\"update:value\", val);\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      // 上傳的圖片(base64字串)\r\n      UploadImage: \"\",\r\n      // 上傳的圖片的檔名\r\n      UploadImageName: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    // 產生id\r\n    safeId() {\r\n      if (this.id || this.$attrs.id) {\r\n        return this.id || this.$attrs.id;\r\n      }\r\n      return makeUid();\r\n    },\r\n    // 是否需要必填\r\n    isRequired() {\r\n      if (this.oldImage == \"\") {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    // Label排版的class\r\n    LabelGridClass() {\r\n      if (this.horizontal === true) {\r\n        return \"col-sm-3 col-form-label\";\r\n      } else if (this.horizontal instanceof Object) {\r\n        return this.horizontal.label + \" col-form-label\";\r\n      }\r\n      return;\r\n    },\r\n    // 選擇檔案所顯示的文字\r\n    UploadImageSelectedStr() {\r\n      if (this.UploadImageName == \"\") {\r\n        return \"尚未選擇檔案\";\r\n      }\r\n      return this.UploadImageName;\r\n    },\r\n    // 預覽圖片區塊的小標題\r\n    ImagePreviewTitle() {\r\n      if (this.oldImage && !this.UploadImage) {\r\n        return \"現有影像\";\r\n      }\r\n      if (this.UploadImage) {\r\n        return \"上傳預覽\";\r\n      }\r\n    },\r\n    // 預覽圖片的src\r\n    ImagePreviewSrc() {\r\n      if (this.oldImage && !this.UploadImage) {\r\n        return this.oldImage;\r\n      }\r\n      if (this.UploadImage) {\r\n        return this.UploadImage;\r\n      }\r\n      return \"\";\r\n    },\r\n  },\r\n  methods: {\r\n    // 檔案上傳與圖片預覽\r\n    GetUploadImage(files, event) {\r\n      // const file = e.target.files.item(0);\r\n      // --(CInputFile傳過來的已經是e.target.files)\r\n      const file = files.item(0);\r\n      if (file) {\r\n        // valid:檢查圖片限制的結果\r\n        let valid = this.limitSize ? this.Validfile(file, \"image\", this.limitSize, this.limitUnit) : true;\r\n        // 顯示預覽圖、圖片存入data\r\n        if (valid) {\r\n          //--建立 reader 變數為一個檔案讀取器物件\r\n          this.UploadImageName = file.name;\r\n          const reader = new FileReader();\r\n          //--先準備好讀取器讀取檔案後要執行的工作\r\n          reader.addEventListener(\"load\", (e) => {\r\n            //----將 e.target.result (也就是讀取器接收到的檔案資訊)存入data\r\n            this.UploadImage = e.target.result;\r\n          });\r\n          //--讀取器讀取上傳的檔案內容\r\n          reader.readAsDataURL(file);\r\n        } else {\r\n          // 檢查不通過\r\n          this.removeUploadImage();\r\n        }\r\n      }\r\n    },\r\n    // 檢查圖片檔案大小\r\n    Validfile(file, type, size, unit) {\r\n      switch (unit) {\r\n        case \"Byte\":\r\n          var fileUnit = 1;\r\n          break;\r\n        case \"KB\":\r\n          var fileUnit = 1024;\r\n          break;\r\n        case \"MB\":\r\n          var fileUnit = 1024 * 1024;\r\n          break;\r\n        case \"GB\":\r\n          var fileUnit = 1024 * 1024 * 1024;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      let fileSize = (file.size / fileUnit).toFixed(0);\r\n      let fileType = file.name.substring(file.name.lastIndexOf(\".\"));\r\n\r\n      switch (type) {\r\n        case \"image\":\r\n          if (!fileType.match(/.jpg|.jpeg|.png|.svg/i)) {\r\n            alert(\"請上傳圖片檔案(.jpg|.jpeg|.png|.svg)\");\r\n            return false;\r\n          }\r\n          break;\r\n        default:\r\n          console.error(\"type_參數設置錯誤！\");\r\n          return false;\r\n          break;\r\n      }\r\n      if (fileSize > size) {\r\n        alert(\"檔案不能超過\" + size + unit);\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    // 移除上傳的圖片\r\n    removeUploadImage() {\r\n      this.UploadImage = \"\";\r\n      this.UploadImageName = \"\";\r\n      document.getElementById(this.safeId).value = null;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.img-thumbnail {\r\n  img {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n  .btn {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    transform: translate(50%, -40%);\r\n    line-height: 1;\r\n    opacity: 0.6;\r\n    &:hover {\r\n      opacity: 1;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImageInput.vue?vue&type=template&id=37f136e6&scoped=true&\"\nimport script from \"./ImageInput.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImageInput.vue?vue&type=style&index=0&id=37f136e6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37f136e6\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageInput.vue?vue&type=style&index=0&id=37f136e6&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CCard',[_c('CCardHeader',{staticClass:\"h5 font-weight-bold\"},[_c('CIcon',{staticClass:\"mt-0\",attrs:{\"name\":\"cil-bullhorn\"}}),_vm._v(\" \"+_vm._s(this.$route.name)+\" \")],1),_c('CCardBody',[_c('CForm',{staticClass:\"needs-validation\",attrs:{\"id\":\"updateForm\"}},[_c('CSelect',{attrs:{\"label\":\"訊息類別\",\"placeholder\":\"請選擇類別\",\"invalidFeedback\":\"必選\",\"horizontal\":\"\",\"required\":\"\",\"options\":_vm.newsTypeList},model:{value:(_vm.newsData.type),callback:function ($$v) {_vm.$set(_vm.newsData, \"type\", $$v)},expression:\"newsData.type\"}}),_c('CInput',{attrs:{\"label\":\"標題\",\"placeholder\":\"請填寫訊息標題\",\"invalidFeedback\":\"必填\",\"horizontal\":\"\",\"required\":\"\",\"maxlength\":\"20\"},model:{value:(_vm.newsData.title),callback:function ($$v) {_vm.$set(_vm.newsData, \"title\", $$v)},expression:\"newsData.title\"}}),_c('CTextarea',{attrs:{\"label\":\"描述\",\"placeholder\":\"請簡述訊息內容\",\"invalidFeedback\":\"必填\",\"horizontal\":\"\",\"required\":\"\",\"maxlength\":\"220\",\"rows\":\"4\",\"description\":((_vm.newsData.description ? _vm.newsData.description.length : 0) + \" / 220\"),\"addWrapperClasses\":\"limit-hint\"},model:{value:(_vm.newsData.description),callback:function ($$v) {_vm.$set(_vm.newsData, \"description\", $$v)},expression:\"newsData.description\"}}),_c('CTextarea',{attrs:{\"label\":\"內文\",\"placeholder\":\"請撰寫訊息內容\",\"invalidFeedback\":\"必填\",\"horizontal\":\"\",\"required\":\"\",\"maxlength\":\"950\",\"rows\":\"6\",\"description\":((_vm.newsData.content ? _vm.newsData.content.length : 0) + \" / 950\"),\"addWrapperClasses\":\"limit-hint\"},model:{value:(_vm.newsData.content),callback:function ($$v) {_vm.$set(_vm.newsData, \"content\", $$v)},expression:\"newsData.content\"}}),_c('ImageInput',{attrs:{\"label\":\"封面圖片\",\"horizontal\":\"\",\"limitSize\":300,\"limitUnit\":\"KB\",\"maxPreview\":\"300px\",\"oldImage\":_vm.newsData.image,\"value\":_vm.UploadImage},on:{\"update:value\":function($event){_vm.UploadImage=$event}}}),_c('CInput',{attrs:{\"type\":\"date\",\"label\":\"發布日期\",\"placeholder\":\"請選擇訊息公開發布的日期\",\"horizontal\":\"\",\"required\":\"\"},model:{value:(_vm.newsData.publish_date),callback:function ($$v) {_vm.$set(_vm.newsData, \"publish_date\", $$v)},expression:\"newsData.publish_date\"}}),_c('CRow',{staticClass:\"form-group\",attrs:{\"form\":\"\"}},[_c('CCol',{staticClass:\"col-form-label\",attrs:{\"sm\":\"3\"}},[_vm._v(\" 是否公開 \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*\")])]),_c('CCol',{staticClass:\"form-row justify-content-start mx-0\",attrs:{\"sm\":\"9\"}},[_c('CInputRadioGroup',{attrs:{\"custom\":\"\",\"inline\":\"\",\"checked\":_vm.newsData.public,\"options\":[\n              { value: true, label: '公開' },\n              { value: false, label: '隱藏' } ]},on:{\"update:checked\":function($event){return _vm.$set(_vm.newsData, \"public\", $event)}}})],1)],1),_c('CRow',{staticClass:\"form-group\",attrs:{\"form\":\"\"}},[_c('CCol',{staticClass:\"col-form-label\",attrs:{\"sm\":\"3\"}},[_vm._v(\"是否置頂\")]),_c('CCol',{staticClass:\"form-row justify-content-start align-items-center mx-0\",attrs:{\"sm\":\"9\"}},[_c('CSwitch',{attrs:{\"color\":\"danger\",\"size\":\"sm\",\"shape\":\"pill\",\"labelOn\":\"✓\",\"labelOff\":\"✕\",\"checked\":_vm.newsData.top},on:{\"update:checked\":function($event){return _vm.$set(_vm.newsData, \"top\", $event)}}})],1)],1)],1)],1),_c('CCardFooter',{attrs:{\"align\":\"right\"}},[(_vm.currId)?_c('IconButton',{staticClass:\"float-left\",attrs:{\"color\":\"danger\",\"icon\":\"cil-trash\"},on:{\"clickFn\":function($event){return _vm.del()}}},[_vm._v(\"刪除此訊息\")]):_vm._e(),_c('CButton',{staticClass:\"mr-3\",attrs:{\"color\":\"secondary\",\"variant\":\"outline\",\"to\":\"/mngt/news\"}},[_vm._v(\"取消\")]),_c('CButton',{attrs:{\"color\":\"success\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"儲存設定\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 訊息種類\r\nconst type = [\r\n  { name: \"活動\", value: 0 },\r\n  { name: \"公告\", value: 1 },\r\n];\r\n\r\nconst newsType = {\r\n  // 取得下拉選單選項清單\r\n  getOptions() {\r\n    return type.map((item) => {\r\n      return { label: item.name, value: item.value };\r\n    });\r\n  },\r\n  // 取得對應的種類名稱\r\n  getTypeNameByValue(value) {\r\n    if (value instanceof Number) {\r\n      let type = type.find((item) => item.value === value);\r\n      if (type) {\r\n        return type.name;\r\n      }\r\n    }\r\n    return \"\";\r\n  },\r\n  // 取得對應的種類值\r\n  getTypeValueByName(name) {\r\n    if (name) {\r\n      let type = type.find((item) => item.name === name);\r\n      if (type) {\r\n        return type.value;\r\n      }\r\n    }\r\n    return null;\r\n  },\r\n};\r\n\r\nexport default newsType;\r\n","import ApiUrl from \"@/const/apiUrl.js\";\r\nimport AjaxService from \"@/services/ajaxService.js\";\r\nimport NewsType from \"@/const/newsType.js\";\r\nimport ImageInput from \"@/components/ImageInput\";\r\n\r\nexport default {\r\n  name: \"NewsEdit\",\r\n  components: {\r\n    ImageInput,\r\n  },\r\n  data() {\r\n    return {\r\n      // 當前訊息ID\r\n      currId: this.$route.params.id,\r\n      // 當前訊息資料\r\n      newsData: {\r\n        id: \"\",\r\n        type: \"\",\r\n        title: \"\",\r\n        description: \"\",\r\n        content: \"\",\r\n        image: \"\",\r\n        publish_date: \"\",\r\n        public: true,\r\n        top: false,\r\n      },\r\n      // 訊息類別清單\r\n      newsTypeList: NewsType.getOptions(),\r\n      // 上傳的圖片(base64字串)\r\n      UploadImage: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (this.currId !== undefined) {\r\n        this.getNewsData();\r\n      }\r\n      this.addRequiredMark();\r\n    },\r\n    // 取得當前訊息資料\r\n    getNewsData() {\r\n      this.$store.commit(\"set\", [\"globalLoading\", true]);\r\n      let url = ApiUrl.getUrl(\"news\", \"getOne\") + this.currId;\r\n      AjaxService.get(\r\n        url,\r\n        (successResp) => {\r\n          if (successResp.restData) {\r\n            let resultData = successResp.restData;\r\n            // 處理發布日期的日期值\r\n            let publish_date = \"\";\r\n            if (resultData.publishDate) {\r\n              publish_date = resultData.publishDate.toString();\r\n              let Y = publish_date.substr(0, 4),\r\n                M = publish_date.substr(4, 2),\r\n                D = publish_date.substr(6, 2);\r\n              publish_date = `${Y}-${M}-${D}`;\r\n            }\r\n            // 最終資料\r\n            this.newsData = {\r\n              id: resultData.id,\r\n              type: resultData.type,\r\n              title: resultData.title,\r\n              description: resultData.description,\r\n              content: resultData.content,\r\n              image: resultData.image,\r\n              publish_date: publish_date,\r\n              public: resultData.public,\r\n              top: resultData.top,\r\n            };\r\n            this.$store.commit(\"set\", [\"globalLoading\", false]);\r\n            console.log(\"查詢訊息成功!\");\r\n          }\r\n        },\r\n        (errorResp) => {\r\n          console.log(\"查詢訊息失敗!\");\r\n          console.log(errorResp);\r\n        }\r\n      );\r\n    },\r\n    // 添加CInput、CTextarea的必填*標記\r\n    addRequiredMark() {\r\n      const requiredInputs = document.querySelectorAll(\"input[required]:not([type='file']),textarea[required],select[required]\");\r\n      requiredInputs.forEach((element) => {\r\n        element.parentElement.previousElementSibling.innerHTML += `<span class=\"text-danger\">*</span>`;\r\n      });\r\n    },\r\n    // 送出資料儲存\r\n    save() {\r\n      const form = document.querySelector(\"#updateForm\");\r\n      form.classList.add(\"was-validated\");\r\n      if (form.checkValidity() === true) {\r\n        this.$store.commit(\"set\", [\"globalLoading\", true]);\r\n        // 處理圖片資料\r\n        let image = this.UploadImage != \"\" ? this.UploadImage : this.newsData.image;\r\n        // 處理發布時間資料\r\n        let publish_date = this.newsData.publish_date.replace(/-/g, \"\");\r\n        // 最終資料\r\n        let sendData = {\r\n          id: this.newsData.id,\r\n          type: this.newsData.type,\r\n          title: this.newsData.title,\r\n          description: this.newsData.description,\r\n          content: this.newsData.content,\r\n          image: image,\r\n          publishDate: publish_date,\r\n          public: this.newsData.public,\r\n          top: this.newsData.top,\r\n        };\r\n        let url = ApiUrl.getUrl(\"news\", \"save\");\r\n        AjaxService.post(\r\n          url,\r\n          sendData,\r\n          (successResp) => {\r\n            this.$store.commit(\"set\", [\"globalLoading\", false]);\r\n            console.log(\"修改訊息成功!\");\r\n            this.$router.push(\"/mngt/news\");\r\n          },\r\n          (errorResp) => {\r\n            console.log(\"修改訊息失敗!\");\r\n            console.log(errorResp);\r\n          }\r\n        );\r\n      } else {\r\n        document.querySelector(\"input:invalid,select:invalid,textarea:invalid\").focus();\r\n      }\r\n    },\r\n    del() {\r\n      if (confirm(\"是否確定要刪除？\\n***** 請注意！刪除後無法復原！*****\")) {\r\n        this.$store.commit(\"set\", [\"globalLoading\", true]);\r\n        let url_base = ApiUrl.getUrl(\"news\", \"delete\");\r\n        AjaxService.delete(\r\n          url_base + this.newsData.id,\r\n          (successResp) => {\r\n            this.$store.commit(\"set\", [\"globalLoading\", false]);\r\n            console.log(\"刪除成功!\");\r\n            this.$router.push(\"/mngt/news\");\r\n          },\r\n          (errorResp) => {\r\n            console.log(\"刪除失敗!\");\r\n            console.log(errorResp);\r\n          }\r\n        );\r\n      }\r\n    },\r\n  },\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./NewsEdit.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./NewsEdit.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewsEdit.vue?vue&type=template&id=bda68842&scoped=true&\"\nimport script from \"./NewsEdit.js?vue&type=script&lang=js&\"\nexport * from \"./NewsEdit.js?vue&type=script&lang=js&\"\nimport style0 from \"./NewsEdit.vue?vue&type=style&index=0&id=bda68842&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bda68842\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsEdit.vue?vue&type=style&index=0&id=bda68842&lang=scss&scoped=true&\""],"sourceRoot":""}