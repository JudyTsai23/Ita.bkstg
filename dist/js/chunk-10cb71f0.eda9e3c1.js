(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10cb71f0"],{"084e":function(e,t,s){"use strict";s("f5e4")},"35ab":function(e,t,s){"use strict";var n={meal:{getAll:"/server/menu/meals/",getOne:"/server/menu/meal/",save:"/server/menu/save",saveSort:"/server/menu",delete:"/server/menu/"},mealCate:{getAll:"/server/mealCate/cate",getAllSub:"/server/mealCate/sub",getOne:"/server/mealCate/",save:"/server/mealCate/save",saveSort:"/server/mealCate",delete:"/server/mealCate/",deleteSub:"/server/mealCate/sub/"},news:{getAll:"/server/news",getOne:"/server/news/mng/",save:"/server/news/save",delete:"/server/news/"}},r={getUrl:function(e,t){if(e||t){var s=n[e][t];return void 0!==s?s:null}return null}};t["a"]=r},"87e5":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("CCard",[s("CCardHeader",{staticClass:"h5 font-weight-bold"},[s("CIcon",{staticClass:"mt-0",attrs:{name:"cil-bullhorn"}}),e._v(" 訊息管理 ")],1),s("CCardBody",[s("CDataTable",{attrs:{items:e.newsList,fields:e.fields,"table-filter":"","items-per-page-select":"","items-per-page":10,noItemsView:{noResults:"無符合的項目",noItems:"尚無任何訊息"},tableFilter:{label:"尋找：",placeholder:"輸入關鍵字..."},itemsPerPageSelect:{label:"每頁顯示筆數："},striped:"",hover:"",sorter:"",pagination:""},scopedSlots:e._u([{key:"public",fn:function(t){var n=t.item;return[s("td",[n.public?s("CBadge",{staticClass:"label-badge",attrs:{color:"success"}},[e._v("公開")]):s("CBadge",{staticClass:"label-badge",attrs:{color:"light"}},[e._v("隱藏")])],1)]}},{key:"top",fn:function(t){var n=t.item;return[s("td",[n.top?s("CBadge",{staticClass:"label-badge",attrs:{color:"danger"}},[e._v("置頂")]):e._e()],1)]}},{key:"actions",fn:function(t){var n=t.item;return[s("td",{staticClass:"py-2"},[s("ProcessButtons",{attrs:{"item-id":n.id,"item-group":"news","edit-url":"/mngt/news/edit/"},on:{reloadFn:e.init}})],1)]}}])})],1),s("CCardFooter",{attrs:{align:"right"}},[s("CButton",{attrs:{color:"info",to:"/mngt/news/create"}},[e._v("新增訊息")])],1)],1)},r=[],a=s("35ab"),i=s("20fc"),l=s("c4f1"),o=[{key:"title",label:"訊息標題"},{key:"publishDate",label:"發布日期"},{key:"type",label:"類別"},{key:"public",label:"是否公開",_style:"width:10%"},{key:"top",label:"是否置頂",_style:"width:10%"},{key:"actions",label:"操作",_style:"width:15%",sorter:!1,filter:!1}],c={name:"News",components:{ProcessButtons:l["a"]},data:function(){return{newsList:[],fields:o}},mounted:function(){this.init()},methods:{init:function(){this.getNewsList()},getNewsList:function(){var e=this;this.$store.commit("set",["globalLoading",!0]);var t=a["a"].getUrl("news","getAll");i["a"].get(t,(function(t){if(t.restData){var s=t.restData;e.newsList=s.map((function(e){var t=e.publishDate.toString(),s=t.substr(0,4),n=t.substr(4,2),r=t.substr(6,2);return e.publishDate="".concat(s,"-").concat(n,"-").concat(r),e})),e.$store.commit("set",["globalLoading",!1]),console.log("查詢訊息成功!")}}),(function(e){console.log("查詢訊息失敗!"),console.log(e)}))},getBadge:function(e){switch(e){case"活動":return"info";case"公告":return"primary";default:}},checkChanged:function(){return!this.changed||!!confirm("頁面內容曾修改過，尚未儲存修改的變更將會捨棄！\n是否確定要離開此頁面？")}}},u=c,d=(s("084e"),s("2877")),m=Object(d["a"])(u,n,r,!1,null,"04389a25",null);t["default"]=m.exports},c4f1:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("CButtonToolbar",{attrs:{justify:""}},[s("IconButton",{staticClass:"text-white my-1 mr-2",attrs:{color:"warning",size:"sm",icon:"cil-pencil"},on:{clickFn:function(t){return e.edit()}}},[e._v("編輯")]),s("IconButton",{staticClass:"text-white my-1 mr-2",attrs:{color:"danger",size:"sm",icon:"cil-trash"},on:{clickFn:function(t){return e.del()}}},[e._v("刪除")])],1)},r=[],a=s("35ab"),i=s("20fc"),l={name:"ProcessButtons",props:{isChange:{type:Boolean,default:!1},itemId:{required:!0},itemGroup:{type:String,required:!0},editUrl:{type:String,default:""},delUrl:{type:String,default:""},delMsg:{type:String,default:""}},data:function(){return{}},methods:{checkChanged:function(){return!this.isChange||!!confirm("頁面內容曾修改過，尚未儲存修改的變更將會捨棄！\n是否確定要離開此頁面？")},edit:function(){if(this.checkChanged()){var e=""==this.editUrl?a["a"].getUrl(this.itemGroup,"edit"):this.editUrl;this.$router.push(e+this.itemId)}},del:function(){var e=this;if(confirm(this.delAlertStr)&&this.checkChanged()){this.$store.commit("set",["globalLoading",!0]);var t=""==this.delUrl?a["a"].getUrl(this.itemGroup,"delete"):this.delUrl;i["a"].delete(t+this.itemId,(function(t){e.$store.commit("set",["globalLoading",!1]),console.log("刪除成功!"),e.$emit("reloadFn")}),(function(e){console.log("刪除失敗!"),console.log(e)}))}}},computed:{delAlertStr:function(){return this.delMsg+"是否確定要刪除？\n***** 請注意！刪除後無法復原！*****"}}},o=l,c=s("2877"),u=Object(c["a"])(o,n,r,!1,null,"9e645470",null);t["a"]=u.exports},f5e4:function(e,t,s){}}]);
//# sourceMappingURL=chunk-10cb71f0.eda9e3c1.js.map